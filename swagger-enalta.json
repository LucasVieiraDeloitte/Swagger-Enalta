{
  "openapi": "3.0.3",
  "info": {
    "title": "Swagger Enalta - OpenAPI 3.0",
    "description": "Este es el swagger definido para el nuevo Portal Comercial de Enalta en el cual se definirán los servicios necesarios para llevar a cabo la funcionalidad definida.\nHay que tener en cuenta, que los servicios se basaran en integraciones con:\n- Bacanti\n- Wordpress\n- Etc\n\n## Algunos links de tu interes es:\n- [Diseños WEB](https://www.figma.com/design/awMXy3SM7NScLSHx7shqlG/Enalta?node-id=643-832&t=00FKie10MbFVgOa0-0)\n- [Diseños COMPONENTES](https://www.figma.com/design/awMXy3SM7NScLSHx7shqlG/Enalta?node-id=2560-116586&t=00FKie10MbFVgOa0-0)\n- [Diseños TOKENS](https://www.figma.com/design/awMXy3SM7NScLSHx7shqlG/Enalta?node-id=13-2&t=00FKie10MbFVgOa0-0)\n- [Diseños IMAGENES](https://www.figma.com/design/awMXy3SM7NScLSHx7shqlG/Enalta?node-id=8-544&t=00FKie10MbFVgOa0-0)\n## Aclaraciones:\n  - En todos los servicios que se devuelva una lista de elementos, en caso de no encontrar un resultado, se devolverá una lista vacía (*[]*)\n  - El formato de fecha, seguirá el estándar, ISO 8601. (YYYY-MM-DDThh:mm:ss.sTZD)",
    "version": "1.0.11"
  },
  "servers": [
    {
      "url": "https://petstore3.swagger.io/api/v3"
    }
  ],
  "tags": [
    {
      "name": "Enviar flores"
    },
    {
      "name": "Localizador de personas fallecidas en el cementerio (Bacanti)"
    },
    {
      "name": "Últimas defunciones"
    }
  ],
  "paths": {
    "/CementerioWeb/Default.aspx": {
      "get": {
        "tags": [
          "Localizador de personas fallecidas en el cementerio (Bacanti)"
        ],
        "summary": "Obtención del iframe de integración del cementerio y acceso",
        "description": "Iframe desde el cual se buscará al fallecido a partir del acceso seleccionado. Como información general, en la siguiente tabla se informan los identificadores a concatenar como query params:\n  \n  - Acceso con **-**, no se requiere id\n  - Acceso con **número**, se requiere el id\n  - Acceso con **N/A**, no existe el acceso\n\n  Nombre Cementerio | Id Cementerio | Id Acceso 1 | Id  Acceso 2 | Id Acceso 3 | Id Acceso 4\n  --- | --- | --- | --- | --- | --- \n  Pozuelo | 280340070304 | - | 1 | N/A | N/A\n  Leganes | 280340070301 | - | 2 | 105 | 105 \n  Arganda Municipal | 280340070310 | - | 11 | N/A | N/A\n  Arganda Antiguo | 280340070311 | - | N/A | N/A | N/A\n  Boadilla del Monte | 280340070306 | - | 1 | N/A | N/A\n  Navalcarnero | 280340070314 | - | N/A | N/A | N/A\n  Estepona | 280340070324 | - | N/A | N/A | N/A \n  Andújar | 280340070318 | - | 451 | N/A | N/A\n  Maspalomas | 280340070322 | - | N/A | N/A | N/A \n  El pedrazo | 280340070323 | - | N/A | N/A | N/A \n  Marratxi | 280340070316 | - | N/A | N/A | N/A \n  Cementerio Jardín Alcalá de Henares | 280340070320 | - | N/A | N/A | N/A\n",
        "operationId": "getLocationDeceasedPerson",
        "parameters": [
          {
            "name": "id",
            "in": "query",
            "description": "Id del cementerio",
            "required": true,
            "style": "form",
            "explode": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "n",
            "in": "query",
            "description": "Id del acceso del cementerio",
            "required": false,
            "style": "form",
            "explode": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful operation"
          }
        }
      }
    },
    "/persons": {
      "get": {
        "tags": [
          "Últimas defunciones"
        ],
        "summary": "Obtención de personas fallecidas pudiendo filtrar por nombre, provincia y municipio. Estos filtros deben ser case-insensitive",
        "parameters": [
          {
            "name": "name",
            "in": "query",
            "description": "Nombre de la persona",
            "required": true,
            "style": "form",
            "explode": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "city",
            "in": "query",
            "description": "Provincia donde se encuentra la persona",
            "required": false,
            "style": "form",
            "explode": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "town",
            "in": "query",
            "description": "Municipio donde se encuentra la persona",
            "required": false,
            "style": "form",
            "explode": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "listado de personas encontradas",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Person"
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "DeathPersonStatus": {
        "type": "string",
        "enum": [
          "wake",
          "cemetery",
          "unknown"
        ]
      },
      "Address": {
        "type": "object",
        "properties": {
          "addressId": {
            "type": "string",
            "description": "Identificador único de la dirección",
            "example": "12345"
          },
          "roadTypeName": {
            "type": "string",
            "description": "Tipo de calle.",
            "example": "Avenida"
          },
          "addressName": {
            "type": "string",
            "description": "Nombre de la calle",
            "example": "Gran Vía de Hortaleza"
          },
          "addressNum": {
            "type": "string",
            "description": "Número de la calle",
            "example": "14"
          },
          "zipCode": {
            "type": "string",
            "description": "Código postal",
            "example": "28033"
          },
          "cityName": {
            "type": "string",
            "description": "Nombre de la provincia"
          },
          "townName": {
            "type": "string",
            "description": "Nombre del municipio"
          },
          "latitude": {
            "type": "number",
            "description": "latitud del centro",
            "format": "float"
          },
          "longitude": {
            "type": "number",
            "description": "longitud del centro",
            "format": "float"
          }
        },
        "description": "Información sobre la localización"
      },
      "Center": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Identificador único del centro. Es opcional. Únicamente lo recibiremos si es un centro gestionado por Enalta.",
            "example": "123456"
          },
          "name": {
            "type": "string",
            "description": "Nombre del centro. Siempre será obligatorio.",
            "example": "Cementerio Jardín Alcalá de Henares"
          },
          "phone": {
            "type": "string",
            "description": "Teléfono de contacto del centro.",
            "example": "930 222 122"
          },
          "openTime": {
            "type": "string",
            "description": "Horario de apertura del centro.",
            "example": "9:00 - 19:00"
          },
          "address": {
            "$ref": "#/components/schemas/Address"
          }
        }
      },
      "Cemetery": {
        "type": "object",
        "description": "Información relacionada sobre el entierro de la persona. Es opcional.",
        "allOf": [
          {
            "$ref": "#/components/schemas/Center"
          }
        ]
      },
      "Wake": {
        "type": "object",
        "description": "Información relacionada sobre dónde se llevará a cabo el velatorio de la persona. Es opcional.",
        "allOf": [
          {
            "$ref": "#/components/schemas/Center"
          },
          {
            "type": "object",
            "properties": {
              "roomId": {
                "type": "string",
                "description": "identificador de la sala Siempre será obligatorio.",
                "example": "98765"
              },
              "initDate": {
                "type": "string",
                "format": "date-time"
              },
              "endDate": {
                "type": "string",
                "format": "date-time"
              },
              "ecommerceInd": {
                "type": "boolean",
                "example": true
              }
            }
          }
        ]
      },
      "Ceremony": {
        "type": "object",
        "description": "Información relacionada sobre dónde se celebrará la ceremonia por la persona. Es opcional.",
        "allOf": [
          {
            "$ref": "#/components/schemas/Center"
          },
          {
            "type": "object",
            "properties": {
              "roomId": {
                "type": "string",
                "description": "identificador de la sala Siempre será obligatorio.",
                "example": "98765"
              },
              "date": {
                "type": "string",
                "format": "date-time"
              }
            }
          }
        ]
      },
      "Person": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Identificador único del fallecido. Siempre será obligatorio.",
            "example": "12345"
          },
          "name": {
            "type": "string",
            "description": "Nombre del fallecido. En caso de ser un nombre compuesto \"Jorge Juan\", se enviará en el mismo campo. Siempre será obligatorio.",
            "example": "María"
          },
          "firstName": {
            "type": "string",
            "description": "Primer apellido. Siempre será obligatorio.",
            "example": "Rodríguez"
          },
          "lastName": {
            "type": "string",
            "description": "Segundo apellido. Es un campo opcional.",
            "example": "Fernández"
          },
          "birthday": {
            "type": "string",
            "description": "Fecha de nacimiento. Es un campo opcional.",
            "format": "date-time"
          },
          "deathday": {
            "type": "string",
            "description": "Fecha de fallecimiento. Es un campo opcional.",
            "format": "date-time"
          },
          "wake": {
            "$ref": "#/components/schemas/Wake"
          },
          "ceremony": {
            "$ref": "#/components/schemas/Ceremony"
          }
        }
      },
      "Product": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64",
            "example": 0
          },
          "sku": {
            "type": "string",
            "description": "Referencia interna de Enalta del producto",
            "example": "0"
          },
          "name": {
            "type": "string",
            "description": "Título del producto",
            "example": "Ramo de flores: 2 margaritas y 2 rosas"
          },
          "description": {
            "type": "string",
            "description": "Descripción informativa del producto",
            "example": "Ramo de flores compuesto por 2 margaritas de color blanco y 2 rosas de color rojo"
          },
          "image": {
            "type": "string",
            "description": "Imagen principal del producto",
            "example": "https://..."
          },
          "category": {
            "type": "string",
            "description": "Categoria a la que pertenece el producto inlcuyendo subcategorías",
            "example": "Ramos>flores"
          },
          "tag": {
            "type": "string",
            "description": "Etiqueta del producto",
            "example": "Es habitual"
          },
          "salable": {
            "type": "boolean",
            "description": "Indicación de vendible o no vendible",
            "example": true
          },
          "displayable": {
            "type": "boolean",
            "description": "Indicación de si es mostrable o no mostrable",
            "example": true
          }
        },
        "description": "Modelo de datos de producto disponible para el canal online."
      }
    },
    "securitySchemes": {
      "petstore_auth": {
        "type": "oauth2",
        "flows": {
          "implicit": {
            "authorizationUrl": "https://petstore3.swagger.io/oauth/authorize",
            "scopes": {
              "write:pets": "modify pets in your account",
              "read:pets": "read your pets"
            }
          }
        }
      },
      "api_key": {
        "type": "apiKey",
        "name": "api_key",
        "in": "header"
      }
    }
  }
}
